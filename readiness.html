<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SIP Readiness Check — Steady Growth</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: radial-gradient(circle at top, #141b35 0, #050816 55%);
      --card: rgba(6,10,28,0.94);
      --muted: #a7afc7;
      --accent: #f0b76b;
      --accent-dark: #b9782f;
      --fg: #ffffff;
      --radius: 16px;
      --border-soft: rgba(255,255,255,0.06);
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Poppins", sans-serif;
      background: var(--bg);
      color: var(--fg);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px 14px;
    }

    .wrap {
      width: 100%;
      max-width: 820px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius);
      padding: 26px;
      box-shadow: 0 18px 36px rgba(0,0,0,0.65);
    }

    h1, h2 {
      font-family: "Playfair Display", serif;
      margin: 0 0 6px 0;
      color: #ffe5ba;
    }

    .subtitle {
      font-size: 0.92rem;
      color: var(--muted);
      margin-bottom: 14px;
    }

    /* Section container */
    .section-page {
      display: none;
      animation: fadeIn 0.25s ease forwards;
    }
    .section-page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Question layout */
    .q-box {
      border: 1px solid var(--border-soft);
      border-radius: 14px;
      padding: 14px 16px;
      margin-bottom: 14px;
      background: rgba(255,255,255,0.02);
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .q-title {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .q-desc {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    /* Highlight missing question */
    .q-box.attention {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(240,183,107,0.45);
    }

    /* Collapsible WHY */
    .why-toggle {
      font-size: 0.82rem;
      color: var(--accent);
      cursor: pointer;
      margin-bottom: 6px;
      display: inline-block;
    }

    .why-box {
      display: none;
      font-size: 0.82rem;
      color: var(--muted);
      border-left: 2px solid var(--accent);
      padding-left: 10px;
      margin-top: 4px;
    }

    /* Yes/No buttons */
    .yn-row {
      display: flex;
      gap: 10px;
      margin-top: 6px;
    }

    .yn-btn {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      background: rgba(255,255,255,0.02);
      cursor: pointer;
      color: var(--muted);
      text-align: center;
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }

    .yn-btn:hover {
      transform: translateY(-2px);
      border-color: rgba(240,183,107,0.28);
      color: #fff;
    }

    .yn-btn.selected {
      background: linear-gradient(90deg, rgba(240,183,107,0.18), rgba(240,183,107,0.05));
      border: 1px solid var(--accent);
      color: #1b1406;
      font-weight: 600;
    }

    /* Navigation */
    .nav-row {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 10px 20px;
      border: 1px solid transparent;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
    }

    .btn-primary {
      background: radial-gradient(circle at 10% 20%, #ffe6c0 0, #f0b76b 35%, #b9782f 100%);
      color: #1b1406;
      border-color: rgba(240,183,107,0.45);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--muted);
    }

    .btn-ghost:hover {
      border-color: rgba(255,255,255,0.45);
      color: #fff;
    }

    /* Summary / boxes */
    .summary-box {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border-soft);
      padding: 16px;
      border-radius: 10px;
      margin-bottom: 18px;
    }

    .score {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 6px;
      text-align: center;
    }

    .score-label {
      font-size: 1.2rem;
      text-align: center;
      margin-bottom: 10px;
      color: #fff;
    }

    .note {
      font-size: 0.85rem;
      color: var(--muted);
      text-align: center;
    }

    @media (max-width: 600px) {
      .card {
        padding: 20px 16px;
      }
    }
  </style>
</head>


<body>
  <div class="wrap">
    <div class="card" id="mainCard">

      <!-- ========== SECTION 0 — INTRO ========== -->
      <div class="section-page active" data-page="0">
        <h1>SIP Readiness Check</h1>
        <p class="subtitle" style="line-height:1.8; font-size:1rem; color:#e5d8c4; margin-top:18px;">
        This is not a generic questionnaire.<br><br>
        
        This assessment has been crafted to evaluate your readiness across 
        <b>five pillars of wealth creation</b>—financial stability, goal clarity, 
        behavioural discipline, investment understanding, and long-term commitment.<br><br>
        
        Each pillar consists of <b>5 precise Yes/No questions</b> that together offer a 
        refined perspective on how prepared you are to begin a disciplined SIP journey, 
        in alignment with your long-term aspirations.<br><br>
        
        Designed to be completed in <b>3–5 minutes</b>, it provides a personalised readiness 
        score to help you invest with confidence and clarity.<br><br>
        
        <b>Let’s begin.</b>
        </p>



        <div style="margin-top:22px; text-align:center;">
          <button class="btn btn-primary" id="startBtn">Start Assessment</button>
        </div>
      </div>


      <!-- ========== SECTION 1 — FINANCIAL FOUNDATION ========== -->
      <div class="section-page" data-page="1">
        <h2>1. Financial Foundation</h2>
        <p class="subtitle">Before starting a SIP, your base should be stable.</p>

        <!-- Q1 -->
        <div class="q-box" data-key="q1">
          <div class="q-title">Emergency fund in place</div>
          <div class="q-desc">You have at least 3–6 months of essential expenses kept aside in a liquid, easily accessible form.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">SIP returns work best when you are not forced to stop or redeem in an emergency.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q2 -->
        <div class="q-box" data-key="q2">
          <div class="q-title">High-interest debt under control</div>
          <div class="q-desc">Credit card / personal loan dues are cleared or being repaid aggressively.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Interest on such loans is usually higher than expected SIP returns.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q3 -->
        <div class="q-box" data-key="q3">
          <div class="q-title">Basic insurance done</div>
          <div class="q-desc">Adequate term life cover (if you have dependants) and health insurance for self/family.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">One big medical or life event should not derail your investments.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q4 -->
        <div class="q-box" data-key="q4">
          <div class="q-title">Reasonably stable income</div>
          <div class="q-desc">Your income is predictable enough to commit a fixed monthly SIP amount.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">SIP is a discipline. Frequent stops and starts dilute the benefit.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q5 -->
        <div class="q-box" data-key="q5">
          <div class="q-title">Can continue SIP even during short-term stress</div>
          <div class="q-desc">You are confident that small cash-flow issues will not lead to stopping the SIP.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">SIP during difficult periods often buys units at better value.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <div class="nav-row">
          <button class="btn btn-ghost prev-btn">Back</button>
          <button class="btn btn-primary next-btn" style="display:none;">Next</button>
        </div>
      </div>


      <!-- ========== SECTION 2 — CLARITY OF PURPOSE ========== -->
      <div class="section-page" data-page="2">
        <h2>2. Clarity of Purpose</h2>
        <p class="subtitle">Investing is easier when the goal is clear.</p>

        <!-- Q6 -->
        <div class="q-box" data-key="q6">
          <div class="q-title">Defined financial goals</div>
          <div class="q-desc">You have at least one clear financial objective (retirement, house, education etc.).</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">"Good return" is not a goal; clear goals help in choosing the right product and horizon.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q7 -->
        <div class="q-box" data-key="q7">
          <div class="q-title">Time horizon known</div>
          <div class="q-desc">You know roughly how long the money will remain invested (e.g., <3 years, 3-7 years, 7+ years).</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Time horizon decides how much equity or debt you should take.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q8 -->
        <div class="q-box" data-key="q8">
          <div class="q-title">Priority understood</div>
          <div class="q-desc">You know whether the goal is must-have, good-to-have or optional.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Higher priority goals need more conservative planning.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q9 -->
        <div class="q-box" data-key="q9">
          <div class="q-title">Understands inflation impact</div>
          <div class="q-desc">You know future costs will be higher and goal amounts need to consider rising prices.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Real returns matter more than nominal numbers. Rs. 10 lakhs today may not be enough 10 years later.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q10 -->
        <div class="q-box" data-key="q10">
          <div class="q-title">Success metric clear</div>
          <div class="q-desc">You will judge your SIP by progress towards the goal and discipline, not by 6–12 month returns.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Short-term return obsession leads to frequent changes and poor outcomes.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <div class="nav-row">
          <button class="btn btn-ghost prev-btn">Back</button>
          <button class="btn btn-primary next-btn" style="display:none;">Next</button>
        </div>
      </div>


      <!-- ========== SECTION 3 — RISK & BEHAVIOUR ========== -->
      <div class="section-page" data-page="3">
        <h2>3. Risk & Behaviour Readiness</h2>
        <p class="subtitle">Your behaviour in bad markets decides your result.</p>

        <!-- Q11 -->
        <div class="q-box" data-key="q11">
          <div class="q-title">Comfortable with volatility</div>
          <div class="q-desc">You can handle seeing a 10–30% fall in value without panic.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">If this thought keeps you awake at night, equity allocation may need adjustment.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q12 -->
        <div class="q-box" data-key="q12">
          <div class="q-title">Not driven by tips or hype</div>
          <div class="q-desc">You do not chase “hot” funds based on social media, TV, friends and relatives.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">SIP works through consistency, not by chasing “hot” ideas. Chasing momentum often results in late entry and poor returns.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q13 -->
        <div class="q-box" data-key="q13">
          <div class="q-title">Prepared to continue during falls</div>
          <div class="q-desc">You see market corrections as a normal part of investing, not a reason to stop SIP.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Many of the best long-term units get bought during such periods.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q14 -->
        <div class="q-box" data-key="q14">
          <div class="q-title">No unrealistic expectations</div>
          <div class="q-desc">You do not expect guaranteed returns or one-directional growth.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box"><b>Reminder</b>: “Low risk + high return” is a myth.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q15 -->
        <div class="q-box" data-key="q15">
          <div class="q-title">No plan to redeem early without reason</div>
          <div class="q-desc">You will not withdraw just because recent returns are low or markets are negative.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Many investors exit at lows and re-enter at highs, causing losses. Staying invested for the stated horizon preserves compounding.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <div class="nav-row">
          <button class="btn btn-ghost prev-btn">Back</button>
          <button class="btn btn-primary next-btn" style="display:none;">Next</button>
        </div>
      </div>


      <!-- ========== SECTION 4 — PROCESS & PRODUCT UNDERSTANDING ========== -->
      <div class="section-page" data-page="4">
        <h2>4. Process and Product Understanding</h2>
        <p class="subtitle">Starting SIP is easy, but doing it right brings results.</p>

        <!-- Q16 -->
        <div class="q-box" data-key="q16">
          <div class="q-title">Know your risk type</div>
          <div class="q-desc">You can identify whether you are conservative, balanced or aggressive investor.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Comfort level matters more than chasing returns.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q17 -->
        <div class="q-box" data-key="q17">
          <div class="q-title">Know equity vs debt basics</div>
          <div class="q-desc">You understand both growth-oriented and stability-oriented investments.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Helps set expectations and avoid surprise during market moves. <br><br> A balanced portfolios protect you from extreme volatility.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q18 -->
        <div class="q-box" data-key="q18">
          <div class="q-title">Fund selection based on fit</div>
          <div class="q-desc">You believe funds should match your goals and timeline, not popularity.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Top-ranked past returns do not guarantee future success.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q19 -->
        <div class="q-box" data-key="q19">
          <div class="q-title">SIP amount linked to goal math</div>
          <div class="q-desc">The SIP amount is calculated based on goal need, not random comfort.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">"Affordable" amount may still be insufficient. A goal-aligned SIP increases probability of success.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q20 -->
        <div class="q-box" data-key="q20">
          <div class="q-title">Review planned every 6-12 months</div>
          <div class="q-desc">You plan calm periodic reviews, not frequent checking.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Over-monitoring creates stress; under-monitoring causes drift. Periodic review keeps the plan aligned.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <div class="nav-row">
          <button class="btn btn-ghost prev-btn">Back</button>
          <button class="btn btn-primary next-btn" style="display:none;">Next</button>
        </div>
      </div>


      <!-- ========== SECTION 5 — COMMITMENT & DISCIPLINE ========== -->
      <div class="section-page" data-page="5">
        <h2>5. Commitment & Discipline</h2>
        <p class="subtitle">Compounding works only when discipline survives emotions.</p>

        <!-- Q21 -->
        <div class="q-box" data-key="q21">
          <div class="q-title">Will not stop SIP without guidance</div>
          <div class="q-desc">You will consult with a qualified advisor before pausing or stopping SIPs.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Emotional decisions usually hurt long-term results.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q22 -->
        <div class="q-box" data-key="q22">
          <div class="q-title">Will continue through market cycles</div>
          <div class="q-desc">You accept that ups and downs are a normal part of investing.You are committed to staying invested unless goals change.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Markets are cyclical; and down markets create opportunities to buy more units at lower prices.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q23 -->
        <div class="q-box" data-key="q23">
          <div class="q-title">No comparison with others</div>
          <div class="q-desc">You avoid comparing returns with friends or social media screenshots.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Everyone has different goals, incomes, timelines and risk levels.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q24 -->
        <div class="q-box" data-key="q24">
          <div class="q-title">Focus on long-term progress</div>
          <div class="q-desc">You care about future wealth, not short-term excitement.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Wealth grows silently, not dramatically.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>

        <!-- Q25 -->
        <div class="q-box" data-key="q25">
          <div class="q-title">Will follow review-based changes</div>
          <div class="q-desc">You value long-term planning & professional advice over short-term feelings.</div>
          <span class="why-toggle">Why it matters ▼</span>
          <div class="why-box">Strategies win, emotions lose.</div>

          <div class="yn-row">
            <div class="yn-btn" data-val="yes">Yes</div>
            <div class="yn-btn" data-val="no">No</div>
          </div>
        </div>
      


        <div class="nav-row">
          <button class="btn btn-ghost prev-btn">Back</button>
          <button class="btn btn-primary" id="finishBtn" style="display:none;">Finish</button>
        </div>

      </div>

     
      <!-- ========== SECTION 6 — LEAD CAPTURE PAGE ========== -->
      <div class="section-page" data-page="6">
        <h1>Your SIP Readiness Score is Ready!</h1>
        <p class="subtitle" style="text-align:center;">
          Enter your details to view your personalised SIP Readiness Score.
        </p>
      
        <div class="summary-box" style="max-width:520px; margin: auto;">
          <form id="leadForm">
            <input type="text" id="name" placeholder="Full Name" required
                   style="width:100%; padding:10px; border-radius:10px; margin-bottom:10px; border:1px solid #333;">
      
            <input type="tel" id="mobile" placeholder="Mobile Number" required
                   style="width:100%; padding:10px; border-radius:10px; margin-bottom:10px; border:1px solid #333;">
      
            <input type="email" id="email" placeholder="Email Address" required
                   style="width:100%; padding:10px; border-radius:10px; margin-bottom:14px; border:1px solid #333;">
      
            <button type="submit" class="btn btn-primary" style="width:100%;">
              View My Score
            </button>
          </form>
        </div>
      
        <p id="leadStatus" style="text-align:center; margin-top:10px; font-size:0.9rem; color:var(--accent);"></p>
      </div>


    </div>
  </div>
<script>
/* -----------------------------------------------------
   INITIAL SETUP & LOCAL STORAGE
-----------------------------------------------------*/
const pages = document.querySelectorAll(".section-page");
let currentPage = 0;
let answers = JSON.parse(localStorage.getItem("readiness_answers") || "{}");
let storedPage = parseInt(localStorage.getItem("readiness_page") || "0");

// We'll track progress for pages 1–6
const TOTAL_PROGRESS_PAGES = 6;

// Reset ONLY on next visit AFTER completion
if (storedPage >= 6) {
  localStorage.removeItem("readiness_answers");
  localStorage.removeItem("readiness_page");
  storedPage = 0;
}

currentPage = storedPage;


/* -----------------------------------------------------
   PROGRESS BAR (FIXED TOP)
-----------------------------------------------------*/
const progressBar = document.createElement("div");
progressBar.style.position = "fixed";
progressBar.style.top = "0";
progressBar.style.left = "0";
progressBar.style.height = "5px";
progressBar.style.width = "0%";
progressBar.style.zIndex = "9999";
progressBar.style.background = "linear-gradient(90deg,#ffe5ba,#f0b76b,#b9782f)";
progressBar.style.transition = "width 0.3s ease";
document.body.appendChild(progressBar);

function updateProgress() {
  if (currentPage === 0) {
    progressBar.style.width = "0%";
    return;
  }
  let percent = (currentPage / TOTAL_PROGRESS_PAGES) * 100;
  if (percent > 100) percent = 100;
  progressBar.style.width = percent + "%";
}


/* -----------------------------------------------------
   PAGE NAVIGATION
-----------------------------------------------------*/
function showPage(n) {
  pages.forEach(p => p.classList.remove("active"));
  const page = pages[n];
  if (page) page.classList.add("active");

  currentPage = n;
  localStorage.setItem("readiness_page", String(n));

  // Scroll to top of section (only on mobile)
  if (window.innerWidth <= 900) {
    setTimeout(() => {
      page.scrollIntoView({ behavior: "smooth", block: "start" });
    }, 150);
  }

  updateProgress();
  checkSectionCompletion();
}

// Initial page render
showPage(currentPage);


// Start
const startBtn = document.getElementById("startBtn");
if (startBtn) startBtn.addEventListener("click", () => showPage(1));


/* -----------------------------------------------------
   NEXT BUTTON HANDLING WITH VALIDATION
-----------------------------------------------------*/
document.querySelectorAll(".next-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const section = document.querySelector(`.section-page[data-page="${currentPage}"]`);
    const qboxes = section.querySelectorAll(".q-box");
    const unanswered = [...qboxes].filter(q => !answers[q.dataset.key]);

    if (unanswered.length > 0) {
      unanswered[0].classList.add("attention");
      unanswered[0].scrollIntoView({ behavior: "smooth", block: "center" });
      setTimeout(() => unanswered[0].classList.remove("attention"), 800);
      return;
    }

    showPage(currentPage + 1);
  });
});


/* -----------------------------------------------------
   PREVIOUS BUTTON HANDLING
-----------------------------------------------------*/
document.querySelectorAll(".prev-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    if (currentPage > 0) {
      showPage(currentPage - 1);
    }
  });
});


/* -----------------------------------------------------
   CLICK HANDLER FOR YES/NO QUESTIONS
-----------------------------------------------------*/
document.querySelectorAll(".q-box").forEach(qbox => {
  const key = qbox.dataset.key;
  const buttons = qbox.querySelectorAll(".yn-btn");

  // Restore previous value visually
  if (answers[key]) {
    buttons.forEach(btn => {
      if (btn.dataset.val === answers[key]) btn.classList.add("selected");
    });
  }

  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      answers[key] = btn.dataset.val;
      localStorage.setItem("readiness_answers", JSON.stringify(answers));

      // Visual selection
      buttons.forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");

      // Intelligent Scroll: move only to next question (mobile)
      if (window.innerWidth <= 900) {
        setTimeout(() => {
          const next = qbox.nextElementSibling?.closest(".q-box");
          if (next) {
            next.scrollIntoView({ behavior: "smooth", block: "center" });
          }
        }, 120);
      }

      checkSectionCompletion();
    });
  });
});


/* -----------------------------------------------------
   SHOW/HIDE NEXT OR FINISH BUTTON BASED ON COMPLETION
-----------------------------------------------------*/
function checkSectionCompletion() {
  const section = document.querySelector(`.section-page[data-page="${currentPage}"]`);
  if (!section) return;

  const qboxes = section.querySelectorAll(".q-box");
  const nextBtn = section.querySelector(".next-btn");
  const finishBtn = document.getElementById("finishBtn");

  const unanswered = [...qboxes].filter(q => !answers[q.dataset.key]);

  if (nextBtn) {
    nextBtn.style.display = unanswered.length === 0 ? "inline-block" : "none";
  }
  if (finishBtn && currentPage === 5) {
    finishBtn.style.display = unanswered.length === 0 ? "inline-block" : "none";
  }
}


/* -----------------------------------------------------
   SUMMARY SCORING
-----------------------------------------------------*/
const finishBtn = document.getElementById("finishBtn");
if (finishBtn) {
  finishBtn.addEventListener("click", () => {
    const total = calculateScore();
    localStorage.setItem("readiness_score", total);
    showPage(6); // navigate to lead page
    localStorage.setItem("readiness_page", "6");
  });
}

function calculateScore() {
  let score = 0;
  for (let i = 1; i <= 25; i++) {
    if (answers["q" + i] === "yes") score++;
  }
  return score;
}


/* -----------------------------------------------------
   LEAD FORM SUBMISSION (Google Sheet + Show Score)
-----------------------------------------------------*/
const leadForm = document.getElementById("leadForm");
const statusEl = document.getElementById("leadStatus");

if (leadForm) {
  leadForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const nameInput = document.getElementById("name");
    const mobileInput = document.getElementById("mobile");
    const emailInput = document.getElementById("email");

    let score = localStorage.getItem("readiness_score") || "0";
    score = Number(score);

    const payload = {
      name: nameInput?.value || "",
      mobile: mobileInput?.value || "",
      email: emailInput?.value || "",
      score,
      answers,
      source: "sip_readiness",
    };

    const webhook = "https://script.google.com/macros/s/AKfycbw-belwpkcLadQvVzgq0cwq_-HD2KBk0vZFyvqHQF3GrYVgpsU8_30Z6jOS2wwzM-ot/exec";

    // Fire-and-forget POST (no CORS blocking)
    fetch(GSHEET_ENDPOINT, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    name: nameInput.value,
    mobile: mobileInput.value,
    email: emailInput.value,
    score,
    readiness_answers: answers,
    source: "sip_readiness"
  })
}).catch((err) => {
      console.error("Lead submit error:", err);
    });

    if (statusEl) {
      statusEl.textContent = "Thank you! Generating your SIP Readiness Report...";
    }

    setTimeout(() => {
      showPage(6);       // Ensure we are on page 6
      showFinalScore(score);
    }, 800);
  });
}


/* -----------------------------------------------------
   SCORE REPORT RENDERING
-----------------------------------------------------*/
function showFinalScore(score) {
  const page = document.querySelector('[data-page="6"]');
  if (!page) return;

  const label = getScoreLabel(score);
  const message = getScoreMessage(score);

  page.innerHTML = `
    <h1>Your SIP Readiness Report</h1>

    <div class="summary-box" style="text-align:center;">
      <div style="font-size:3rem; font-weight:700; color:var(--accent); margin-bottom:6px;">
        ${score} / 25
      </div>
      <div style="font-size:1.4rem; font-weight:600; margin-bottom:10px;">
        ${label}
      </div>
      <p style="font-size:1rem; color:#d4d7e9; line-height:1.6;">
        ${message}
      </p>
    </div>

    <div class="summary-box" style="margin-top:20px;">
      <h3 style="margin-bottom:8px; font-size:1.05rem; color:#ffe5ba;">How to read this score</h3>
      <ul style="line-height:1.7; color:#bbc2da; font-size:0.95rem; padding-left:18px; margin:0;">
        <li><b>0–8</b> → Not yet ready. Focus on building emergency funds, clearing high-interest debt and clarifying goals first.</li>
        <li><b>9–15</b> → Medium risk zone. Work with an adviser to strengthen your foundation before committing large SIPs.</li>
        <li><b>16–21</b> → Almost ready. A few gaps exist; correct them with guidance before increasing risk or amount.</li>
        <li><b>22–25</b> → Fully ready. You have the right base, mindset and process to start or continue a disciplined long-term SIP.</li>
      </ul>
    </div>

    <div class="summary-box" style="margin-top:20px;">
      <h3 style="margin-bottom:8px; font-size:1.05rem; color:#ffe5ba;">What this means for you</h3>
      <p style="line-height:1.6; color:#bbc2da; font-size:0.94rem; margin:0;">
        This score reflects your preparedness across <b>5 pillars</b> — foundation, clarity, behaviour, product understanding, and discipline.
        Higher scores suggest stronger alignment with long-term wealth creation through SIPs. Lower scores simply indicate areas where
        a structured plan and guidance can add a lot of value.
      </p>
    </div>

    <div class="nav-row" style="flex-direction:column; gap:12px; margin-top:25px;">
      <a class="btn btn-primary" href="risk_intro.html">Get Personalized Investment Plan →</a>
      <a class="btn btn-ghost" href="index.html">← Back to Website</a>
    </div>
  `;
}

function getScoreLabel(score) {
  if (score <= 8) return "Not Ready";
  if (score <= 15) return "Medium Risk Zone";
  if (score <= 21) return "Almost Ready";
  return "Fully Ready";
}

function getScoreMessage(score) {
  if (score <= 8) {
    return "Your financial base and behaviour patterns need strengthening before you commit to meaningful SIPs.";
  }
  if (score <= 15) {
    return "You have some readiness, but there are important gaps. With a bit of guidance, you can move to a more confident position.";
  }
  if (score <= 21) {
    return "You’re close to being SIP-ready. A few refinements in discipline, clarity or product choice can make a big difference.";
  }
  return "You have a strong foundation, clarity and discipline. You are well-positioned to benefit from long-term SIP investing.";
}


/* -----------------------------------------------------
   WHY TOGGLE COLLAPSE
-----------------------------------------------------*/
document.querySelectorAll(".why-toggle").forEach(toggle => {
  toggle.addEventListener("click", () => {
    const box = toggle.nextElementSibling;
    if (!box) return;

    if (box.style.display === "block") {
      box.style.display = "none";
      toggle.textContent = "Why it matters ▼";
    } else {
      box.style.display = "block";
      toggle.textContent = "Why it matters ▲";
    }
  });
});

</script>

</body>
</html>
