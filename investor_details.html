<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Share Your Details — Steady Growth</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Load global site header + nav -->
  <link rel="stylesheet" href="styles/global.css">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: linear-gradient(180deg,#0b0e14 0%, #0d1116 60%);
      --card: rgba(6,10,28,0.96);
      --muted: #9ea7c5;
      --gold: #e3b769;
      --gold-light: #ffe6b9;
      --accent: #b8873a;
      --radius: 14px;
    }

    html,body{
      height:100%; margin:0;
      font-family:"Poppins",sans-serif;
      background:var(--bg);
      color:#fff;
      -webkit-font-smoothing:antialiased;
    }

    .wrap{
      max-width:820px;
      margin:48px auto;
      padding:18px;
    }

    .card{
      background:var(--card);
      border-radius:16px;
      padding:22px;
      border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 18px 36px rgba(0,0,0,0.6);
    }

    h1{
      font-family:"Playfair Display",serif;
      color:var(--gold-light);
      margin:0 0 6px;
      font-size:1.8rem;
    }

    p.lead{
      color:var(--muted);
      margin:0 0 18px;
      line-height:1.6;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px
    }

    .field { display:flex; flex-direction:column; gap:8px; margin-bottom:12px }
    label { color:var(--muted); font-size:0.92rem }

    input[type="text"], input[type="tel"], input[type="email"], textarea {
      padding:10px 12px;
      border-radius:10px;
      background: rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.04);
      color:#fff;
      outline:none;
      font-size:0.95rem;
    }

    textarea { min-height:110px; resize:vertical }

    /* GitHub-Pages-safe dropdown */
    select {
      padding: 10px 40px 10px 12px;
      border-radius: 10px;
      background: rgba(255,255,255,0.04);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.10);
      font-size: 0.95rem;
      appearance: none;
      outline: none;
      cursor: pointer;

      /* fully encoded SVG arrow */
      background-image: url("data:image/svg+xml,%3Csvg fill='%23e3b769' height='20' width='20' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 18px;
    }

    select option{
      background:#0f131a;
      color:#fff;
      padding:8px;
    }

    select:focus{
      border-color:var(--gold-light);
      box-shadow:0 0 0 2px rgba(227,183,105,0.25);
    }

    .btn{
      padding:10px 18px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      border:none;
    }

    .btn-primary{
      background: linear-gradient(90deg,var(--gold-light),var(--gold));
      color:#24180b;
    }

    .btn-ghost{
      background:transparent;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.06);
      padding:9px 14px;
    }

    .small{ font-size:0.86rem; color:var(--muted) }
    .note { font-size:0.88rem; color:var(--muted); margin-top:10px }
    .status { margin-top:12px; font-size:0.95rem }
    .status.ok { color:#4caf50 }
    .status.err { color:#ff6b6b }

    .hp { display:none; position:absolute; left:-9999px; }

    @media(max-width:720px){
      .grid { grid-template-columns: 1fr }
      h1 { font-size:1.5rem }
      .wrap { margin:20px 12px }
    }
  </style>
</head>

<body>

  <!-- GLOBAL HEADER (from global.css) -->
  <header class="sg-header">
    <div class="sg-container">
      <div class="sg-logo"><a href="index.html">Steady Growth</a></div>

      <nav class="sg-nav">
        <a href="index.html">Home</a>
        <a href="readiness.html">Readiness Check</a>
        <a href="risk_profile.html">Risk Profile</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <div class="card">
      <h1>Share Your Details</h1>
      <p class="lead">
        Leave your contact details and a short note — we will review your risk profile  
        and suggest a personalised plan. We respect your privacy and will not share your details.
      </p>

      <form id="leadCollector" novalidate>
        <div class="grid">

          <div class="field">
            <label for="name">Full name *</label>
            <input id="name" name="name" type="text" placeholder="Ankit Chakraborty" autocomplete="name" required />
          </div>

          <div class="field">
            <label for="mobile">Mobile number *</label>
            <input id="mobile" name="mobile" type="tel" placeholder="10-digit mobile" inputmode="tel" pattern="[0-9]{10}" required />
          </div>

          <div class="field">
            <label for="email">Email (optional)</label>
            <input id="email" name="email" type="email" placeholder="you@example.com" autocomplete="email" />
          </div>

          <div class="field">
            <label for="pref">Preferred channel</label>
            <select id="pref" name="pref">
              <option value="call">Call</option>
              <option value="whatsapp">WhatsApp</option>
              <option value="email">Email</option>
            </select>
          </div>

          <div class="field">
            <label for="timepref">Preferred time to connect</label>
            <select id="timepref" name="timepref">
              <option value="9am-12noon">9 AM – 12 Noon</option>
              <option value="12noon-3pm">12 Noon – 3 PM</option>
              <option value="3pm-6pm">3 PM – 6 PM</option>
              <option value="6pm-9pm">6 PM – 9 PM</option>
            </select>
          </div>

        </div>

        <div class="field">
          <label for="message">Message (optional)</label>
          <textarea id="message" name="message" placeholder="Any context we should know (goals, monthly SIP, timelines)"></textarea>
        </div>

        <div class="hp" aria-hidden="true">
          <label for="hp_field">If you are human, leave this empty</label>
          <input id="hp_field" name="hp_field" type="text" />
        </div>

        <div style="display:flex; gap:12px; align-items:center; margin-top:6px; flex-wrap:wrap">
          <button type="submit" id="submitBtn" class="btn btn-primary">Send my details</button>
          <button type="button" id="whatsappBtn" class="btn btn-ghost">Message on WhatsApp</button>
          <div id="status" class="status" aria-live="polite"></div>
        </div>

        <div class="note" style="margin-top:14px">
          By submitting, you consent to being contacted regarding investment services.  
          We never share your data without permission.
        </div>
      </form>

      <div style="margin-top:18px; display:flex; gap:12px; align-items:center; justify-content:flex-end">
        <a href="risk_profile.html" class="small">Back to Risk Assessment</a>
        <a href="index.html" class="small">Back to Website</a>
      </div>
    </div>
  </div>

<script>
const LEAD_ENDPOINT = "";
const REDIRECT_AFTER = "";
const WA_PHONE = "91XXXXXXXXXX";

const form = document.getElementById("leadCollector");
const statusEl = document.getElementById("status");
const whatsappBtn = document.getElementById("whatsappBtn");

function validateMobile(m){
  const only = (m||"").replace(/\D/g,'');
  return only.length === 10 ? only : null;
}

form.addEventListener("submit", async(ev)=>{
  ev.preventDefault();
  statusEl.textContent = "";
  statusEl.className = "status";

  const hp = document.getElementById("hp_field").value;
  if(hp && hp.trim().length>0){
    statusEl.textContent="Thanks.";
    return;
  }

  const name = document.getElementById("name").value.trim();
  const mobileRaw = document.getElementById("mobile").value.trim();
  const mobile = validateMobile(mobileRaw);
  const email = document.getElementById("email").value.trim();
  const pref = document.getElementById("pref").value;
  const timepref = document.getElementById("timepref").value;
  const message = document.getElementById("message").value.trim();

  if(!name){
    statusEl.textContent="Please enter your full name.";
    statusEl.className="status err";
    return;
  }
  if(!mobile){
    statusEl.textContent="Please enter a valid 10-digit mobile number.";
    statusEl.className="status err";
    return;
  }

  const payload = {
    name, mobile, email, pref, timepref, message,
    ts:new Date().toISOString(),
    source:"lead_collector_page"
  };

  const btn = document.getElementById("submitBtn");
  btn.disabled=true;
  btn.style.opacity="0.7";
  statusEl.textContent="Sending...";
  statusEl.className="status";

  try{
    if(LEAD_ENDPOINT && LEAD_ENDPOINT.length>8){
      const resp = await fetch(LEAD_ENDPOINT,{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify(payload)
      });
      if(!resp.ok) throw new Error("Network response not OK");
      statusEl.textContent="Thanks! Your details were submitted successfully.";
      statusEl.className="status ok";
    } else {
      const store = JSON.parse(localStorage.getItem("lead_store_v1")||"[]");
      store.push(payload);
      localStorage.setItem("lead_store_v1",JSON.stringify(store));
      statusEl.textContent="Thanks! (Test mode) Your details were saved locally.";
      statusEl.className="status ok";
    }

    form.reset();

    if(REDIRECT_AFTER && REDIRECT_AFTER.length>5){
      setTimeout(()=>{ window.location.href = REDIRECT_AFTER; },900);
    }

  } catch(err){
    console.error(err);
    statusEl.textContent="Sorry — we couldn't submit your details. Try again later.";
    statusEl.className="status err";

  } finally {
    btn.disabled=false;
    btn.style.opacity="1";
  }
});

/* WhatsApp */
whatsappBtn.addEventListener("click",()=>{
  const name=(document.getElementById("name").value||"").trim();
  const mobile=(document.getElementById("mobile").value||"").trim();
  const msg = encodeURIComponent(
    `Hi, I want to share my details for a personalised SIP plan.\nName: ${name}\nMobile: ${mobile}\nSource: website`
  );

  window.open(
    WA_PHONE && WA_PHONE.length>6 ?
    `https://wa.me/${WA_PHONE}?text=${msg}` :
    `https://wa.me/?text=${msg}`,
    "_blank"
  );
});
</script>

</body>
</html>
